<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDS 101: Introduction to Computational and Data Sciences</title>
    <link rel="stylesheet" href="https://archive2019.cds101.com/theme/css/cds101.min.css">
    <link rel="stylesheet" href="https://archive2019.cds101.com/theme/css/custom.css">
      <link rel="stylesheet" href="https://archive2019.cds101.com/theme/css/vendor/katex/katex.min.css">
      <link rel="stylesheet" href="https://archive2019.cds101.com/theme/css/vendor/highlightjs/default.css">
      <link rel="stylesheet" href="https://archive2019.cds101.com/theme/css/vendor/fontawesome/fa-svg-with-js.css">
      <link href="https://archive2019.cds101.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="CDS 101: Introduction to Computational and Data Sciences Full Atom Feed" />
</head>  <body>
    <div class="header-grid-container">
<div class="banner-container">
  <header>
    <div class="banner">
      <div class="course-logo">
        <a href="https://archive2019.cds101.com/"><img src="https://archive2019.cds101.com/theme/img/course-logo.svg"></a>
      </div>
      <div class="university-logo">
        <a href="https://gmu.edu"><img src="https://archive2019.cds101.com/theme/img/university-logo.svg"></a>
      </div>
    </div>
  </header>
</div>    </div>
<div class="navbar-container">
  <nav class="navbar">
    <div class="navbar-mobile" data-responsive-toggle="main-menu" data-hide-for="large">
      <button type="button" data-toggle="main-menu"><i class="fas fa-bars"></i><span class="navbar-mobile-title">Menu</span></button>
    </div>

    <div class="navbar-menu" id="main-menu">
      <ul class="navbar-menu-list">
        <li>
          <a class="navbar-home-item" href="https://archive2019.cds101.com/"><i class="fas fa-home" data-fa-transform="grow-8"></i></a>
        </li>
            <li>
              <a class="navbar-menu-item" href="https://archive2019.cds101.com/materials.html">Materials</a>
            </li>
            <li>
              <a class="navbar-menu-item" href="https://archive2019.cds101.com/assignments.html">Assignments</a>
            </li>
            <li>
              <a class="navbar-menu-item" href="https://archive2019.cds101.com/labs.html">Labs</a>
            </li>
          <li class="navbar-social">
            <ul class="navbar-social-list">
                <li>
                  <a class="navbar-social-item" href="https://github.com/jkglasbrenner/cds101-course-materials"><i class="fab fa-github" data-fa-transform="grow-8"></i></a>
                </li>
                <li>
                  <a class="navbar-social-item" href="feeds/all.atom.xml"><i class="fas fa-rss-square" data-fa-transform="grow-8"></i></a>
                </li>
            </ul>
          </li>
      </ul>
    </div>
  </nav>
</div>    <div class="content-grid-container">
    <article class="static-page">
<header class="static-page-header">
  <h1 class="static-page-title">Lab 07 – Basketball and Hot&nbsp;Hands</h1>
</header><div class="static-page-body">
  <h2 id="instructions">Instructions</h2>
<p>Obtain the GitHub repository you will use to complete the lab, which contains a starter file named <span class="monospace">lab07.Rmd</span>. This lab shows you how we can use randomized simulations to gain insight into whether or not basketball players can have a “hot hand”. Carefully read the lab instructions and complete the exercises using the provided spaces within your starter file <span class="monospace">lab07.Rmd</span>. Then, when you’re ready to submit, follow the directions in the <a href="#how-to-submit"><i class="fas fa-link"></i>How to submit</a> section&nbsp;below.</p>
<h2 id="the-hot-hand">The Hot&nbsp;Hand</h2>
<p>Basketball players who make several baskets in succession are described as having a <em>hot hand</em>. Fans and players have long believed in the hot hand phenomenon, which refutes the assumption that each shot is independent of the next. However, <a href="https://drive.google.com/file/d/1NN8ZRmk7ZUc5KeJl7PJfeUF0PRqG6hdR"><i class="fas fa-link"></i>a 1985 paper</a> by Gilovich, Vallone, and Tversky collected evidence that contradicted this belief and showed that successive shots are independent events. This paper started a great controversy that continues to this day, as you can see by Googling <em>hot hand basketball</em>.</p>
<p>We do not expect to resolve this controversy today. However, we’ll apply one approach to answering questions like this, which will allow us to (1) think about the effects of independent and dependent events, (2) learn how to simulate shooting streaks in R, and (3) to compare a simulation to actual data in order to determine if the hot hand phenomenon appears to be&nbsp;real.</p>
<h2 id="about-the-dataset">About the&nbsp;dataset</h2>
<p>Our investigation will focus on the performance of one player: <a href="https://en.wikipedia.org/wiki/Kobe_Bryant"><i class="fas fa-link"></i>Kobe Bryant</a> of the Los Angeles Lakers. His performance against the Orlando Magic in the <a href="https://en.wikipedia.org/wiki/2009_NBA_Finals"><i class="fas fa-link"></i>2009 <span class="caps">NBA</span> Finals</a> earned him the title <em>Most Valuable Player</em> and many spectators commented on how he appeared to show a hot hand. Accordingly, our dataset is taken from the five games the Los Angeles Lakers played against the Orlando Magic in the 2009 <span class="caps">NBA</span>&nbsp;finals.</p>
<p>The table below provides descriptions of the dataset’s 6&nbsp;variables,</p>
<table>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="monospace">vs</span></td>
<td><span class="caps">ORL</span> if the Los Angeles Lakers played against Orlando</td>
</tr>
<tr class="even">
<td><span class="monospace">game</span></td>
<td>game in the 2009 <span class="caps">NBA</span> finals</td>
</tr>
<tr class="odd">
<td><span class="monospace">quarter</span></td>
<td>quarter in the game, <span class="caps">OT</span> stands for overtime</td>
</tr>
<tr class="even">
<td><span class="monospace">time</span></td>
<td>time of game in seconds at which Kobe took a shot</td>
</tr>
<tr class="odd">
<td><span class="monospace">description</span></td>
<td>description of the shot</td>
</tr>
<tr class="even">
<td><span class="monospace">shot</span></td>
<td>H if the shot was a hit, M if the shot was a miss</td>
</tr>
</tbody>
</table>
<h2 id="defining-a-shooting-streak">Defining a shooting&nbsp;streak</h2>
<p>If you inspect the <span class="monospace">shot</span> column, you’ll quickly find that inspecting a string of <span class="monospace">H</span>’s and <span class="monospace">M</span>’s by eye makes it be difficult to gauge whether or not it seems like Kobe was shooting with a hot hand. To make any progress we will need to define what we mean when we say a player has a hot hand. For the purposes of our investigation, we will base our hot hand definition on the belief that hot hand shooters tend to go on shooting streaks, where the length of a shooting streak is defined as the <em>number of consecutive baskets a player makes until a miss occurs</em>.</p>
<p>For example, in Game 1 Kobe Bryant had the following sequence of hits and misses from his nine shot attempts in the first&nbsp;quarter:</p>
<pre><code>H M | M | H H M | M | M | M</code></pre>
<p>You can verify this by viewing the first 8 rows of the dataset using <code>View()</code>. Within these nine shot attempts there are six streaks, which are separated by a <span class="monospace">|</span> above. The lengths of each streak are one, zero, two, zero, zero, zero (in order of&nbsp;occurrence).</p>
<ol class="example" type="1">
<li>What does a streak length of 1 mean, i.e. how many hits and misses are in a streak of 1? What about a streak length of&nbsp;0?</li>
</ol>
<p>Counting streak lengths manually for all 133 of Kobe’s shots would get tedious, so we’ll use the function <code>calc_streak()</code> to calculate them. This function has been loaded automatically for you in your R Markdown report&nbsp;file.</p>
<ol start="2" class="example" type="1">
<li><p>Run the following code to calculate the length of Kobe’s shooting&nbsp;streaks,</p>
<pre class="r"><code>kobe_streak &lt;- calc_streak(kobe_basket)</code></pre>
<p>then visualize the distribution of the streak&nbsp;lengths.</p>
<pre class="r"><code>ggplot(kobe_streak) +
  geom_bar(
    mapping = aes(x = length)
  )</code></pre>
<p>Describe the distribution of Kobe’s streak lengths from the 2009 <span class="caps">NBA</span> finals. What was his typical streak length? How long was his longest streak of&nbsp;baskets?</p></li>
</ol>
<h2 id="compared-to-what">Compared to&nbsp;what?</h2>
<p>We’ve shown that Kobe had some long shooting streaks, but are they long enough to support the belief that he had a hot hand? What can we compare them&nbsp;to?</p>
<p>To address these questions we will need to make use of the concept of <em>independence</em>. Two processes are independent if the outcome of one process doesn’t affect the outcome of the second. So if each shot that a player takes is an independent process, then that means that making or missing your first shot <strong>will not</strong> affect the probability that you will make or miss your second shot. Conversely, a shooter with a hot hand will have shots that are <strong>not</strong> independent of one another. Specifically, if the shooter makes his first shot, the hot hand model says he will have a <em>higher</em> probability of making his second&nbsp;shot.</p>
<p>Let’s suppose for a moment that the hot hand model is valid for Kobe. During his career, the percentage of times that Kobe makes a basket (i.e. his shooting percentage) is about 45%, or in probability notation, <span class="math display">\[P(\text{shot 1 = H}) = 0.45\]</span> If he makes the first shot and has a hot hand (remember, this would mean that shots are <strong>not</strong> independent), then the probability that he makes his second shot would go up to, let’s say, 60%, <span class="math display">\[P(\text{shot 2 = H} \, | \, \text{shot 1 = H}) = 0.60\]</span> As a result of these increased probabilites, you’d expect Kobe to have longer&nbsp;streaks.</p>
<p>Compare this to the skeptical perspective where Kobe does <em>not</em> have a hot hand, where each shot is independent of the next. If he hit his first shot, the probability that he makes the second would still be 0.45, <span class="math display">\[P(\text{shot 2 = H} \, | \, \text{shot 1 = H}) = 0.45\]</span> In other words, making the first shot did nothing to affect the probability that he’d make his second shot. If Kobe’s shots are independent, then he’d have the same probability of hitting every shot regardless of his past shots:&nbsp;45%.</p>
<p>Now that we’ve phrased the situation in terms of independent shots, let’s return to the question: how do we tell if Kobe’s shooting streaks are long enough to indicate that he has a hot hand? We can compare his streak lengths to someone without a hot hand: an independent&nbsp;shooter.</p>
<h2 id="simulations-in-r">Simulations in&nbsp;R</h2>
<p>While we don’t have any data from a shooter we know to have independent shots, this sort of data is easy to simulate in R using a package called <span class="monospace">infer</span>. In a simulation, you set the ground rules of a random process and then the computer uses random numbers to generate an outcome that adheres to those rules. As a simple example let’s simulate 100 flips of a fair coin, which has a 50% chance of coming up heads and a 50% chance of coming up tails. Our <span class="monospace">infer</span> template for this simulation is as&nbsp;follows,</p>
<pre class="r"><code>probability_heads &lt;- 0.5

tibble(outcome = rep(combine(&quot;heads&quot;, &quot;tails&quot;), each = 50)) %&gt;%
  specify(outcome ~ NULL, success = &quot;heads&quot;) %&gt;%
  hypothesize(null = &quot;point&quot;, p = probability_heads) %&gt;%
  generate(reps = 1, type = &quot;simulate&quot;) %&gt;%
  ungroup() %&gt;%
  count(outcome)</code></pre>
<ol start="3" class="example" type="1">
<li><p>Copy and paste all of the above template code into a single code block within your R Markdown notebook and run it. This will simulate the flipping of a fair coin 100 times. From inspecting the results table and seeing the number of times you flip a heads versus tails, does this seem to behave like a fair coin? Why or why&nbsp;not?</p>
<p>Next, re-run the same code block a couple more times and watch what happens to the results table. Does it stay the same or does it change? If it changes, why would your result be different each time you run the&nbsp;simulation?</p></li>
</ol>
<p>Now, imagine that we wanted to simulate an <em>unfair</em> coin that only lands on heads 20% of the time. How could we do&nbsp;this?</p>
<ol start="4" class="example" type="1">
<li><p>Copy and paste the code block from <strong>Exercise 3</strong> and adjust the value for <span class="monospace">probability_heads</span> from <span class="monospace">0.5</span> to <span class="monospace">0.2</span>, which is how we tell R that we want the probability of flipping heads to be 20%. Run the code block. In your simulation of 100 flips of the unfair coin, how many flips came up&nbsp;heads?</p>
<p>If you wanted the probability of <strong>flipping tails</strong> to be 45%, what should you set <span class="monospace">probability_heads</span> equal&nbsp;to?</p></li>
</ol>
<h2 id="simulating-the-independent-shooter">Simulating the Independent&nbsp;Shooter</h2>
<p>Simulating a basketball player who has independent shots uses the same mechanism that we use to simulate a coin flip. To simulate a single shot from an independent shooter with a shooting percentage of 50% we&nbsp;type,</p>
<pre class="r"><code>probability_hit &lt;- 0.5

sim_basket &lt;- kobe_basket %&gt;%
  specify(shot ~ NULL, success = &quot;H&quot;) %&gt;%
  hypothesize(null = &quot;point&quot;, p = probability_hit) %&gt;%
  generate(reps = 1, type = &quot;simulate&quot;) %&gt;%
  ungroup() %&gt;%
  transmute(shot = as.character(shot))</code></pre>
<p>Notice here that the dataset <span class="monospace">kobe_basket</span> is being piped into <code>specify()</code>. This does two things, (1) it will ensure that our shot outcomes will be labeled as either <span class="monospace">H</span> or <span class="monospace">M</span>, and (2) it will ensure that our simulated independent shooter will take 133 shots, the same number of shots that Kobe Bryant takes in this&nbsp;dataset.</p>
<ol start="5" class="example" type="1">
<li>To make a valid comparison between Kobe and our simulated independent shooter, we need to align their shooting percentages. What change needs to be made to the code template so that it reflects a shooting percentage of 45%? Make this adjustment, then run a simulation to sample 133 shots. This will assign the output of this simulation to <span class="monospace">sim_basket</span>.</li>
</ol>
<p>With the results of the simulation saved as <span class="monospace">sim_basket</span>, we have the data necessary to compare Kobe to our independent shooter. Both datasets represent the results of 133 shot attempts, each with the same shooting percentage of 45%. We know that our simulated data is from a shooter that has independent shots. That is, we know the simulated shooter does not have a hot&nbsp;hand.</p>
<h2 id="additional-exercises">Additional&nbsp;exercises</h2>
<ol start="6" class="example" type="1">
<li><p>Using <code>calc_streak()</code>, compute the streak lengths for the simulated independent shooter saved to <span class="monospace">sim_basket</span>. Assign the results of <code>calc_streak()</code> to a variable named <span class="monospace">sim_streak</span>.</p></li>
<li><p>Visualize the distribution of simulated streak lengths and discuss it. Based on your results, what is the typical streak length for this simulated independent shooter with a 45% shooting percentage? How long is the player’s longest streak of baskets in 133&nbsp;shots?</p></li>
<li><p>If you were to run the simulation of the independent shooter a second time, how would you expect its streak distribution to compare to the distribution from the question above? Exactly the same? Somewhat similar? Totally different? Explain your&nbsp;reasoning.</p></li>
<li><p>How does Kobe Bryant’s distribution of streak lengths compare to the distribution of streak lengths for the simulated shooter? Using this comparison, do you have evidence that the hot hand model fits Kobe’s shooting patterns?&nbsp;Explain.</p></li>
</ol>
<h2 id="how-to-submit">How to&nbsp;submit</h2>
<p>To submit your lab, follow the two steps below. Your lab will be graded for credit <strong>after</strong> you’ve completed both&nbsp;steps!</p>
<ol type="1">
<li><p>Save, commit, and push your completed R Markdown file so that everything is synchronized to GitHub. If you do this right, then you will be able to view your completed file on the GitHub&nbsp;website.</p></li>
<li><p>Knit your R Markdown document to the <span class="caps">PDF</span> format, export (download) the <span class="caps">PDF</span> file from RStudio Server, and then upload it to <em>Lab 7</em> posting on&nbsp;Blackboard.</p></li>
</ol>
<h2 id="cheatsheets">Cheatsheets</h2>
<p>You are encouraged to review and keep the following cheatsheets handy while working on this&nbsp;lab:</p>
<ul>
<li><p><a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">data import/tidyr&nbsp;cheatsheet</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">dplyr&nbsp;cheatsheet</a></p></li>
<li><p><a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">ggplot2&nbsp;cheatsheet</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf">RStudio&nbsp;cheatsheet</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf">R Markdown&nbsp;cheatsheet</a></p></li>
<li><p><a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">R Markdown&nbsp;reference</a></p></li>
</ul>
<h2 id="credits">Credits</h2>
<p>This lab is a derivative of <a href="https://htmlpreview.github.io/?https://github.com/andrewpbray/oiLabs-base-R/blob/master/probability/probability.html">OpenIntro Lab 4 – Probability</a> by Andrew Bray and Mine Çetinkaya-Rundel, which was adapted from a lab written by Mark Hansen of <span class="caps">UCLA</span> Statistics, used under <a href="https://creativecommons.org/licenses/by-sa/3.0/"><span class="caps">CC</span> <span class="caps">BY</span>-<span class="caps">SA</span> 3.0</a>. This lab is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. Adapted by James Glasbrenner for <span class="caps">CDS</span>&nbsp;102.</p>

</div>    </article>
    </div>
<footer class="page-footer">
    <div class="footer-grid-container">
      Except where otherwise noted, site materials are created by
      <a href="https://cos.gmu.edu/cds/faculty-profile-james-glasbrenner/">
        James K. Glasbrenner
      </a>
      and licensed under a
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
        Creative Commons Attribution-ShareAlike 4.0 International License
      </a>.
    </div>
</footer><script src="https://archive2019.cds101.com/theme/js/cds101.min.js"></script>
  <script src="https://archive2019.cds101.com/theme/js/vendor/highlightjs/highlight.min.js"></script>
  <script src="https://archive2019.cds101.com/theme/js/vendor/katex/katex.min.js"></script>
  <script src="https://archive2019.cds101.com/theme/js/vendor/katex/contrib/auto-render.min.js"></script>
  <script src="https://archive2019.cds101.com/theme/js/vendor/wookmark/wookmark.min.js"></script>
  <script src="https://archive2019.cds101.com/theme/js/vendor/fontawesome/fontawesome-all.min.js"></script>
  <script src="https://archive2019.cds101.com/theme/js/vendor/vendorInit.js"></script>
  </body>
</html>